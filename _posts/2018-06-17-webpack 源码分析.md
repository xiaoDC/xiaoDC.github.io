---
layout: post
author: fri3nds
title: webpack æºç åˆ†æ
category: æŠ€æœ¯åšæ–‡
tag: [javascript]
description: "webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)"
---

# webpack æºç åˆ†æ
![webpack-logo](/public/img/webpack-logo.svg)

webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)

## æ¦‚å¿µ

webpack æ˜¯ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„ï¼Œæƒ³è¦é©¾é©­å®ƒä½ å¿…é¡»é¦–å…ˆç†è§£å…¶ 4 ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š
- å…¥å£ enry
- è¾“å‡º output
- loader
- æ’ä»¶ plugins

![1527947274105](/public/img/1527947274105.jpg)

ä¸Šå›¾æ˜¯ webpack é…ç½®æ–‡ä»¶çš„ä¸€ä¸ªğŸŒ°

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ `æ¨¡å¼` è¿™ä¸ªæ¦‚å¿µï¼Œä¸»è¦æ˜¯ webpack æ ¹æ®ä¸åŒæ¨¡å¼å¼€å¯ç›¸åº”çš„å†…ç½®çš„ä¼˜åŒ–ã€‚


æ³¨æ„ï¼šæ–°ç‰ˆæ–‡æ¡£åŠ å…¥ Browser Compatibility

> webpack supports all browsers that areÂ [ES5-compliant](https://kangax.github.io/compat-table/es5/)Â (IE8 and below are not supported). webpack needsÂ `Promise`Â forÂ `import()`Â andÂ `require.ensure()`. If you want to support older browsers, you will need toÂ [load a polyfill](https://webpack.js.org/guides/shimming/)Â before using these expressions.

## æœºåˆ¶

æœ¬æ–‡çš„åˆ†ææ˜¯åŸºäº webpack 3.11.0 äº†ï¼Œæ–°çš„ç‰ˆæœ¬æ”¯æŒäº†ä¸€äº›æ–°çš„ç‰¹æ€§ï¼Œä¸åœ¨è®¨è®ºèŒƒå›´ã€‚

![webpack-flow](/public/img/webpack-flow.jpg)


![bin-webpack](/public/img/bin-webpack.jpg)

ä¸Šè¿°çš„æºç æˆªå›¾å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ‰§è¡Œ `webpack` å‘½ä»¤æ—¶ä¼šåšä»€ä¹ˆå¤„ç†ï¼Œä¸»è¦æ˜¯è§£æå‘½ä»¤è¡Œå‚æ•°ä»¥åŠæ‰§è¡Œæ‰“åŒ…ï¼Œå…¶ä¸­ `processOptions` å°±æ˜¯ `/bin/webpack.js` çš„æ ¸å¿ƒå‡½æ•°ã€‚

![options](/public/img/options.jpg)

è§£æå‡ºæ¥çš„ options å‚æ•°

![processOptions](/public/img/processOptions.jpg)

![lib-webpack](/public/img/lib-webpack.jpg)

ä¸Šè¿° webpack å‡½æ•°é‡Œï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š
- Compilerï¼ŒCompiler ç±»ç»§æ‰¿ Tapableï¼Œè¿™ä¸ª Tapable æ˜¯ä¸€ä¸ªæ’ä»¶æ¡†æ¶ï¼Œé€šè¿‡ç»§æ‰¿å®ƒçš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ³¨å†Œå’Œè°ƒç”¨æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ webpack çš„æºç ä¸­ï¼Œå­˜åœ¨å¤§é‡çš„ compiler.applyã€compiler.applyPluginsã€compiler.plugin ç­‰Tapableæ–¹æ³•çš„è°ƒç”¨ã€‚Webpack çš„ plugin æ³¨å†Œå’Œè°ƒç”¨æ–¹å¼ï¼Œéƒ½æ˜¯æºè‡ª Tapable ã€‚Webpack é€šè¿‡ plugin çš„ apply æ–¹æ³•å®‰è£…è¯¥ pluginï¼ŒåŒæ—¶ä¼ å…¥ä¸€ä¸ª webpack ç¼–è¯‘å¯¹è±¡ï¼ˆWebpack compiler objectï¼‰ã€‚

  ![compiler](/public/img/compiler.jpg)

- compiler.options = new WebpackOptionsApply().process(options, compiler)
  è¿™ä¸ªæ–¹æ³•å°†ä¼šé’ˆå¯¹æˆ‘ä»¬ä¼ è¿›å»çš„ `compiler` è¿›è¡Œä¸€äº›æ“ä½œï¼Œé‚£ä¹ˆå¹²äº†ä»€ä¹ˆå‘¢

  ![WebpackOptionsApply](/public/img/WebpackOptionsApply.jpg)

  å†™äº†å¾ˆå¤šä»£ç ï¼Œæ€»ç»“ä¸‹æ¥å°±å¹²äº† 3 ä»¶äº‹æƒ…

  - [x] æŠŠ `options` ä¸Šçš„é…ç½®ä¿¡æ¯å¤åˆ¶åˆ° `compiler` ä¸Š

  - [x] æ”¯æŒäº†ä¸€ä¸‹ä¸åŒ target(~~æœ‰æœ¬äº‹ï¼Œä½ æ”¯æŒ React Native ç¯å¢ƒå•Š~~)ï¼Œå¹¶æ³¨å†Œäº†ä¸åŒ target çš„å†…ç½®æ’ä»¶

  - [x] æ³¨å†Œäº†å¤§é‡å†…ç½®æ’ä»¶



## ç¼–è¯‘ä¸ä¸»æµç¨‹
webpack çš„å®é™…å…¥å£æ˜¯ Compiler ä¸­çš„ run æ–¹æ³•ï¼Œrun ä¸€æ—¦æ‰§è¡Œåï¼Œå°±å¼€å§‹äº†ç¼–è¯‘å’Œæ„å»ºæµç¨‹ ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªæ¯”è¾ƒå…³é”®çš„ webpack äº‹ä»¶èŠ‚ç‚¹ã€‚å…·ä½“çš„äº‹ä»¶èŠ‚ç‚¹ï¼Œwebpack æä¾›äº†è¯¦ç»†çš„ [hooks](https://webpack.js.org/api/compiler-hooks/)
- `entry-option` åˆå§‹åŒ– option

- `run` å¼€å§‹æ‰§è¡Œ

- `compile` å¼€å§‹ç¼–è¯‘

- `make` ä»å…¥å£ç‚¹åˆ†ææ¨¡å—åŠå…¶ä¾èµ–çš„æ¨¡å—ï¼Œåˆ›å»ºè¿™äº›æ¨¡å—å¯¹è±¡

- `before-resolve` è§¦å‘ `factory` äº‹ä»¶

- `factory` è§¦å‘ `resolver` äº‹ä»¶

- `build-resolve` `after-resolve` å¯¹å…¶ä¸­ä¸€ä¸ªæ¨¡å—ä½ç½®è¿›è¡Œè§£æ

- `build-module` å¼€å§‹æ„å»º(build)è¿™ä¸ª moduleï¼Œè¿™é‡Œå°†ä½¿ç”¨æ–‡ä»¶å¯¹åº”çš„ loader åŠ è½½

- `after-compile` å®Œæˆæ„å»º

- `seal` å°è£…æ„å»ºç»“æœ

- `emit` æŠŠå„ä¸ª chunk è¾“å‡ºåˆ°ç»“æœæ–‡ä»¶

- `after-emit` å®Œæˆè¾“å‡º

  ![webpack-runtime](/public/img/webpack-runtime.png)


### 1. run
![before-run-and-run](/public/img/before-run-and-run.jpg)
æ‰§è¡Œäº† before-run å’Œ run ä¹‹åï¼Œå¼€å§‹è°ƒç”¨ compiler.compile æ–¹æ³•


### 2. compile
![compile](/public/img/compile.jpg)

è°ƒç”¨ compiler.compile æ–¹æ³•ï¼Œé¦–å…ˆè§¦å‘ `before-compile` ç„¶åè§¦å‘ `compile` äº‹ä»¶ï¼Œç„¶åæ„å»º compilation å®ä¾‹

![compilation](/public/img/compilation.png)


è¿™ä¸ªå¯¹è±¡æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯è´Ÿè´£ç»„ç»‡æ•´ä¸ªæ‰“åŒ…è¿‡ç¨‹ï¼ŒåŒ…å«äº†æ¯ä¸ªæ„å»ºç¯èŠ‚åŠè¾“å‡ºç¯èŠ‚æ‰€å¯¹åº”çš„æ–¹æ³•ï¼Œå¯ä»¥ä»å›¾ä¸­çœ‹åˆ°æ¯”è¾ƒå…³é”®çš„æ­¥éª¤ï¼Œå¦‚ `addEntry()`, `_addModuleChain()`, `buildModule()`, `seal()`, `createChunkAssets()` (åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šè§¦å‘ webpack äº‹ä»¶å»è°ƒç”¨å„æ’ä»¶)ã€‚äºŒæ˜¯è¯¥å¯¹è±¡å†…éƒ¨å­˜æ”¾ç€æ‰€æœ‰ module ï¼Œchunkï¼Œç”Ÿæˆçš„ asset ä»¥åŠç”¨æ¥ç”Ÿæˆæœ€åæ‰“åŒ…æ–‡ä»¶çš„ template çš„ä¿¡æ¯ã€‚

![newCompilation](/public/img/newCompilation.jpg)
ä¸Šå›¾å¯ä»¥çœ‹åˆ°åˆå§‹åŒ– compilation çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜è§¦å‘äº† `this-compilation` å’Œ `compilation` ä¸¤ä¸ªäº‹ä»¶

this-compilation äº‹ä»¶è§¦å‘ `CommonsChunkPlugin` æ’ä»¶ï¼Œåœ¨è¿™ä¸ªæ—¶å€™æ‰§è¡Œäº†ï¼Œå¾€ `compilation` ä¸Šæ³¨å†Œäº† `optimize-chunks` å’Œ `optimize-extracted-chunks` ä¸¤ä¸ªäº‹ä»¶
è¿˜è§¦å‘äº† `extract-text-webpack-plugin` æ’ä»¶ï¼Œå…¶åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¾€ `compilation` ä¸Šæ³¨å†Œäº† `normal-module-loader` äº‹ä»¶ã€‚

compilation äº‹ä»¶å°±æ›´å‰å®³äº†ï¼Œè§¦å‘äº†ä¸€å †æ’ä»¶ã€‚


### 3. make

åœ¨åˆå§‹åŒ– compilation åï¼Œå°±å¼€å§‹äº† `make` çš„é˜¶æ®µã€‚

![MultiEntryPlugin](/public/img/MultiEntryPlugin.jpg)
```js
// MultiEntryDependency.js
const Dependency = require("../Dependency");

class MultiEntryDependency extends Dependency {
	constructor(dependencies, name) {
		super();
		this.dependencies = dependencies;
		this.name = name;
	}

	get type() {
		return "multi entry";
	}
}

module.exports = MultiEntryDependency;


// SingleEntryDependency.js
const ModuleDependency = require("./ModuleDependency");

class SingleEntryDependency extends ModuleDependency {
	constructor(request) {
		super(request);
	}

	get type() {
		return "single entry";
	}
}

module.exports = SingleEntryDependency;

// ModuleDependency.js
const Dependency = require("../Dependency");

class ModuleDependency extends Dependency {
	constructor(request) {
		super();
		this.request = request;
		this.userRequest = request;
	}

	isEqualResource(other) {
		if(!(other instanceof ModuleDependency))
			return false;

		return this.request === other.request;
	}
}

module.exports = ModuleDependency;
```
å¥½åƒä»€ä¹ˆğŸ‚é€¼çš„äº‹æƒ…éƒ½æ²¡æœ‰å¹²å•Šï¼
åˆå§‹åŒ–å¥½ dependencies(dependencies æ˜¯ä¸€ä¸ª SingleEntryDependency å®ä¾‹çš„array) åï¼Œå°±å¼€å§‹äº† compilationl.addEntry æ–¹æ³•ã€‚ åœ¨ addEntry ä¸­è°ƒç”¨ç§æœ‰æ–¹æ³• _addModuleChainã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦åšäº†ä¸¤ä»¶äº‹æƒ…ï¼Œä¸€æ˜¯æ ¹æ®æ¨¡å—çš„ç±»å‹è·å–å¯¹åº”çš„æ¨¡å—å·¥å‚å¹¶åˆ›å»ºæ¨¡å—ï¼ŒäºŒæ˜¯æ„å»ºæ¨¡å—ã€‚

![addModuleChain](/public/img/addModuleChain.jpg)

åœ¨ä¹‹å‰è§¦å‘ compilation åï¼Œå¾ˆå¤šæ’ä»¶å¾€ compilation.dependencyFactories è¿™ä¸ª Set å¡äº†å¾ˆå¤šæ¨¡å—å·¥å‚ã€‚

å–å‡ºå¯¹åº”çš„æ¨¡å—å·¥å‚ï¼Œè°ƒç”¨å…¶é™æ€æ–¹æ³• create, åˆå§‹åŒ– Module å®ä¾‹ã€‚

![MultiModule](/public/img/MultiModule.jpg)

ç„¶åè°ƒç”¨äº† compilation.addModule æ–¹æ³•ï¼Œå°† module å­˜å‚¨åœ¨ compilation.modules è¿™ä¸ªæ•°ç»„é‡Œï¼Œå¹¶è¿”å› true è¡¨ç¤ºæ·»åŠ æˆåŠŸã€‚

ä¹‹å‰ MultiEntryPlugin.createDependency æ ¹æ® entry åˆ›å»ºäº† MultiEntryDependency å®ä¾‹ã€‚

![addEntry](/public/img/addEntry.jpg)

å°† module ç»‘å®šåˆ° entry ä¸Šï¼Œåˆå°† module å­˜å‚¨åˆ°äº† compilation.entries æ•°ç»„é‡Œã€‚

buildModule å‡½æ•°å†…éƒ¨ï¼Œè§¦å‘`build-module` äº‹ä»¶ï¼Œè°ƒç”¨ module.build æ–¹æ³•ã€‚å°±æ˜¯ç®€å•åœ°å°† module.built ç½®ä¸º trueï¼Œæœ€åè°ƒç”¨ compilation é‡Œé¢çš„ moduleReady æ–¹æ³•ï¼Œè¿›è€Œè°ƒç”¨ compilation.processModuleDependencies æ–¹æ³•ã€‚

ä¸­é—´ä» module.dependences é€’å½’æ‹¿åˆ° SingleEntryDependency å¯¹åº”çš„ factoryï¼Œå…¶ä¸­è§¦å‘ `build-resolve` äº‹ä»¶ï¼Œfactory æœ€åè°ƒç”¨äº† enhanced-resolve æä¾›çš„ `Resolver` å®ä¾‹çš„ doResolve æ–¹æ³•ã€‚

`create-module` æœ€åè°ƒç”¨äº† NormalModule, NormalModule createLoaderContext åˆ›å»º loader ä¸Šä¸‹æ–‡ï¼Œæœ€åä¼šå»è°ƒç”¨ LoaderRunner çš„ runLoaders, runLoaders çš„å›è°ƒå®Œæˆäº† sourceMap çš„ä¸€äº›åŠŸèƒ½ï¼Œæœ€åæ‰§è¡Œäº† doBuild(NormalModule çš„å®ä¾‹æ–¹æ³•) ä¼ å…¥çš„å›è°ƒå³ this.parser.parse(this ä¹Ÿæ˜¯ NormalModule çš„å®ä¾‹)

![NormalModule-build](/public/img/NormalModule-build.jpg)


![Parser](/public/img/Parser.jpg)

parser çš„ parse æ–¹æ³•å°±æ˜¯è°ƒç”¨ [acorn](https://github.com/ternjs/acorn) è§£æç» loader å¤„ç†åçš„æºæ–‡ä»¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ ASTï¼Œç„¶åè§¦å‘äº† program äº‹ä»¶

![Parser-state](/public/img/Parser-state.jpg)

æœ€åè¿”å›çš„ state çš„æ•°æ®å¦‚å›¾ã€‚



é€’å½’è§£æå®Œentryåï¼Œæœ€åä¼šè°ƒç”¨ compilation.seal æ–¹æ³•ã€‚

![Compilation-seal](/public/img/Compilation-seal.jpg)

ä¸­é—´çš„å¾ˆå¤šäº‹ä»¶è§¦å‘åï¼Œè°ƒç”¨äº† compilation.createModuleAssets æ–¹æ³•è¿›è¡Œæ‰“åŒ…åä»£ç çš„ç”Ÿæˆã€‚
(æœªå®Œå¾…ç»­...)




## webpack ä¸­çš„ä¸€äº›æ¦‚å¿µ

webpack æ»¡è¶³å…¶é«˜åº¦è‡ªå®šä¹‰çš„å¯èƒ½æ€§ï¼Œä¹Ÿå¸¦æ¥äº†é…ç½®çš„å¤æ‚æ€§ï¼Œå·²ç»å¯ä»¥[è‘—ä¹¦ç«‹ä¼ ](http://webpack.wuhaolin.cn/)
1. `module` ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ª module
2. `chunk` code splitting åçš„äº§ç‰©ï¼Œä¹Ÿå°±æ˜¯æŒ‰éœ€åŠ è½½çš„åˆ†å—ï¼Œè£…è½½äº†ä¸åŒçš„ module
3. `filename` output é…ç½®ä¸‹çš„ä¸€ä¸ªé€‰é¡¹ï¼Œæ¯ä¸€ä¸ª bundle çš„å‘½åæ¨¡æ¿
4. `chunkFileName` å¯ä»¥å‚è€ƒ [æˆ‘çš„å›ç­”](https://segmentfault.com/q/1010000003850413?_ea=769657)

å¯¹äº module å’Œ chunk çš„å…³ç³»å¯ä»¥å‚ç…§ webpack å®˜æ–¹çš„è¿™å¼ å›¾

![module-vs-chunk](/public/img/module-vs-chunk.jpg)

webpack çš„ä½œè€…ä¹Ÿå›ç­”äº† [Concepts - Bundle vs Chunk](https://github.com/webpack/webpack.js.org/issues/970)  è¿™ä¸ªé—®é¢˜

> A chunk is a bundle.
Yes a chunk is a bundle. Chunk the class is the encapsulation for parts of your dependency graph.
> There are three classifications of Chunks:
- `Entry chunk`: An entry chunk is an emitted file which contains the webpack runtime code. To be classified as an entry chunk, the emitted JS bundle/file must contain that bootstrap code seen above. Sometimes there will be no modules and they can be isolated into separate files. The entry chunk must always be executed first.
- `Initial chunk`: An initial chunk is loaded synchronously however doesn't contain the runtime code.
- `Normal chunk`: The only thing that separates an initial chunk from a normal chunk is how the file is loaded. Normal chunks are always lazy loaded and asynchronous. For example when I use require.ensure, or System.import or import(), webpack will separate any of the modules into a separate normal chunk.

> Is it always one chunk for output file?
> The only case where it is not, is when there are for example sourcemaps that are emitted alongside. These multiple assets that are written to disk are known as chunk assets.



## æ³¨å†Œæ’ä»¶

![NodeEnvironmentPlugin](/public/img/NodeEnvironmentPlugin.jpg)

`NodeEnvironmentPlugin` æ’ä»¶ç±»å¿…é¡»æœ‰ `apply` å®ä¾‹æ–¹æ³•ï¼Œå¯ä»¥æ‹¿åˆ° webpack æ•´ä¸ª `compiler` å®ä¾‹ï¼Œ

![other-plugins](/public/img/other-plugins.jpeg)

ä¸Šå›¾ä¸­çš„éƒ½æ˜¯è§£æ webpack.config æ–‡ä»¶å¾—åˆ°çš„ options çš„ plugins

![Tapable](/public/img/Tapable.jpg)

æ’ä»¶é€šè¿‡ `apply` æ–¹æ³•ï¼Œæ‹¿åˆ° `compiler` å®ä¾‹ï¼Œåœ¨ `apply` æ–¹æ³•å†…ï¼Œé€šè¿‡ `compiler.plugin` æ–¹æ³•ï¼Œæ¥æ³¨å†Œæ’ä»¶ã€‚
å¦‚ä½•ç¼–å†™ä¸€ä¸ª webpack çš„æ’ä»¶å¯ä»¥å‚è€ƒ [how to witre a plugin](https://webpack.js.org/contribute/writing-a-plugin/)



## webpack ä¸­çš„ä¸€äº› Tapable å®ä¾‹
- Compiler
- Compilation
- Resolver
- NormalModuleFactory
- ContextModuleFactory
- Template
- Template Subclass - MainTemplate/ChunkTemplate/ModuleTemplate/DependencyTemplate
- Parser

(å…·ä½“çš„è¯¦ç»†è§£é‡Šå¯ä»¥æŸ¥çœ‹[æ–‡ç« ](https://medium.com/webpack/the-contributors-guide-to-webpack-part-2-9fd5e658e08c))


## webpack çš„ä¸€äº›ä¼˜åŒ–
- scope hoisting(ä½œç”¨åŸŸæå‡)
new webpack.optimize.ModuleConcatenationPlugin()
https://github.com/webpack/webpack/tree/master/examples/scope-hoisting

ç›´è§‚æ„Ÿå—å°±æ˜¯â€”â€”å‡½æ•°å£°æ˜å°‘äº†å¾ˆå¤šï¼Œå› æ­¤è€Œå¸¦æ¥çš„å¥½å¤„æœ‰ï¼š

1. æ–‡ä»¶ä½“ç§¯æ¯”ä¹‹å‰æ›´å°ã€‚
2. è¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸä¹Ÿæ¯”ä¹‹å‰å°‘äº†ï¼Œå¼€é”€ä¹Ÿéšä¹‹å˜å°ã€‚

é¡¹ç›®ä¸­çš„æ¨¡å—è¶Šå¤šï¼Œä¸Šè¿°çš„ä¸¤ç‚¹æå‡å°±ä¼šè¶Šæ˜æ˜¾ã€‚

- pure module
https://github.com/webpack/webpack/tree/feature/pure-module/examples/pure-module

- tree shaking
https://webpack.js.org/guides/tree-shaking/

tree shaking çš„å°´å°¬æ˜¯
1. cmd ä¸è¡Œ
2. es6 æœ‰äº† import åŠ¨æ€å¼•å…¥ä¾èµ–
3. æœ‰äº›åº“ä¼šå°†æœ€ç»ˆçš„è¾“å‡ºå…ƒç´ ç”¨Object.freezeæ–¹æ³•åŒ…è£¹èµ·æ¥, å¼•å…¥äº†å‰¯ä½œç”¨

- split Chunk
1. DllPluginå’ŒCommonsChunkPluginï¼ˆsplitChunksï¼‰å¯ä»¥å…±å­˜å—ï¼Ÿ
2. è®¸å¤šäººåœ¨ä½¿ç”¨CommonsChunkPluginçš„æ—¶å€™å¹¶æ²¡æœ‰æ³¨æ„åˆ°Webpackä¼šå°†runtimeä¸€èµ·æ‰“åŒ…è¿›vendorsæ–‡ä»¶ï¼Œæ‰€ä»¥æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œå°½ç®¡ä½ å¹¶æ²¡æœ‰ä¿®æ”¹ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä½†æ˜¯vendorsæ–‡ä»¶çš„hashå€¼å´å˜äº†ï¼Œå¯¼è‡´æµè§ˆå™¨ç¼“å­˜å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«åˆ©ç”¨èµ·æ¥ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦é…ç½®CommonsChunkPluginå°†runtimeå•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚

https://zhuanlan.zhihu.com/p/35407642




webpack 4 çš„ä¸€äº›æ–°ä¸œè¥¿
http://zcfy.baomitu.com/article/webpack-4-changes-part-1-week-24-25-webpack-medium-4303.html

webpack 4 é‡‡å‘å°ç™½é¼ 
https://zhuanlan.zhihu.com/p/37896189

æˆ‘çš„æ¨è
thread-loader
webpack-stylish



## Tapable
å¿…é¡»åæ§½ä¸€ä¸‹ï¼ŒTapable çš„æ–¹æ³•å‘½åç®€ç›´å°±æ˜¯åƒåœ¾ï¼Œä¸‹é¢è®²ä¸€ä¸‹

`apply` `applyPlugins` `plugin` `applyPluginsBailResult` `applyPluginsAsync` çš„åŒºåˆ«

1. apply

   æ³¨å†Œæ’ä»¶

2. plugin

   ç›‘å¬äº‹ä»¶ï¼Œå¹¶æ·»åŠ äº‹ä»¶å›è°ƒ

3. applyPlugins

   è§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥æ’ä»¶

4. applyPluginsBailResult

   è§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥æ’ä»¶ï¼Œä¸”æ’ä»¶çš„å›è°ƒå¿…é¡»æœ‰è¿”å›å€¼

5. applyPluginsAsync applyPluginsAsyncSeries

   æ³¨å†Œå›è°ƒï¼Œè§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥æ’ä»¶

6. applyPluginsBailResult
   è§¦å‘äº‹ä»¶ï¼Œå¹¶æ‹¿åˆ°ç›‘å¬äº‹ä»¶çš„å›è°ƒçš„æ‰§è¡Œç»“æœ



## å‚è€ƒæ–‡æ¡£

webpack æ ¸å¿ƒå¼€å‘è€…å†™çš„é«˜çº§è€å¸æœºæŒ‡å—: [https://medium.com/webpack/contributors-guide/home](https://medium.com/webpack/contributors-guide/home)

å‘½ä»¤è¡Œè¾“å…¥webpackçš„æ—¶å€™éƒ½å‘ç”Ÿäº†ä»€ä¹ˆ: [https://github.com/DDFE/DDFE-blog/issues/12](https://github.com/DDFE/DDFE-blog/issues/12)

ç»†è¯´ webpack ä¹‹æµç¨‹ç¯‡: [http://taobaofed.org/blog/2016/09/09/webpack-flow/](http://taobaofed.org/blog/2016/09/09/webpack-flow/)

webpack æºç è§£æ: [https://lihuanghe.github.io/2016/05/30/webpack-source-analyse.html](https://lihuanghe.github.io/2016/05/30/webpack-source-analyse.html)

Tapable å’Œ äº‹ä»¶æµ: [https://segmentfault.com/a/1190000008060440](https://segmentfault.com/a/1190000008060440)

webpack ä¸»è¦å¯¹è±¡: [https://segmentfault.com/a/1190000008060484](https://segmentfault.com/a/1190000008060484)

å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„webpack: [https://github.com/youngwind/blog/issues/99](https://github.com/youngwind/blog/issues/99)

webpack è¯¦ç»†çš„æ„å»ºè¿‡ç¨‹: [https://github.com/liangklfangl/webpack-compiler-and-compilation](https://github.com/liangklfangl/webpack-compiler-and-compilation)
